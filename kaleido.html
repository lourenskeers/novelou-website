<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>#StayInRange â€“ Kaleido</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #eef;
      overflow: hidden;
      font-family: sans-serif;
    }
    canvas {
      display: block;
    }
    #ui {
      position: absolute;
      top: 10px;
      left: 10px;
      color: #222;
      font-size: 18px;
    }
    #gameOver, #soundToggle {
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <div id="ui">
    <button id="soundToggle">ðŸ”Š Sound: On</button>
    <span>Score: <span id="score">0</span></span>
    <button id="gameOver" style="display:none;">Restart</button>
  </div>
  <canvas id="game"></canvas>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const scoreEl = document.getElementById("score");
    const restartBtn = document.getElementById("gameOver");
    const soundToggle = document.getElementById("soundToggle");

    let soundOn = true;
    let score = 0;
    let running = false;

    const hero = {
      x: 100,
      y: canvas.height / 2,
      vy: 0,
      size: 40
    };

    const GRAVITY = 0.5;
    const JUMP = -8;
    const UPPER_BOUND = 100;
    const LOWER_BOUND = canvas.height - 100;

    // Sound
    const jumpSound = new Audio("https://www.soundjay.com/button/beep-07.mp3");
    const crashSound = new Audio("https://www.soundjay.com/buttons/beep-10.mp3");

    document.addEventListener("keydown", (e) => {
      if (e.code === "Space") {
        if (running) {
          hero.vy = JUMP;
          if (soundOn) jumpSound.play();
        } else {
          startGame();
        }
      }
    });

    restartBtn.addEventListener("click", startGame);
    soundToggle.addEventListener("click", () => {
      soundOn = !soundOn;
      soundToggle.textContent = soundOn ? "ðŸ”Š Sound: On" : "ðŸ”‡ Sound: Off";
    });

    function startGame() {
      hero.y = canvas.height / 2;
      hero.vy = 0;
      score = 0;
      running = true;
      restartBtn.style.display = "none";
      requestAnimationFrame(gameLoop);
    }

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw "danger zones"
      ctx.fillStyle = "#ffcccc";
      ctx.fillRect(0, 0, canvas.width, UPPER_BOUND);
      ctx.fillRect(0, LOWER_BOUND, canvas.width, canvas.height - LOWER_BOUND);

      // Draw boundaries
      ctx.strokeStyle = "#ff0000";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(0, UPPER_BOUND);
      ctx.lineTo(canvas.width, UPPER_BOUND);
      ctx.moveTo(0, LOWER_BOUND);
      ctx.lineTo(canvas.width, LOWER_BOUND);
      ctx.stroke();

      // Update and draw hero
      hero.vy += GRAVITY;
      hero.y += hero.vy;

      ctx.fillStyle = "#00aa00";
      ctx.fillRect(hero.x, hero.y, hero.size, hero.size);

      // Update score
      score++;
      scoreEl.textContent = score;

      // Check for collisions
      if (hero.y < UPPER_BOUND || hero.y + hero.size > LOWER_BOUND) {
        running = false;
        restartBtn.style.display = "inline-block";
        if (soundOn) crashSound.play();
        return;
      }

      if (running) requestAnimationFrame(gameLoop);
    }

    // Start automatically
    startGame();
  </script>
</body>
</html>
